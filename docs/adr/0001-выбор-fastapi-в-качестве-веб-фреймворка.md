# 1. Выбор FastAPI в качестве веб-фреймворка
Дата: 2025-11-30

## Статус
Принято

## Контекст
Необходимо выбрать веб-фреймворк для ML-сервиса, который предоставляет
REST API с эндпоинтами `/predict` и `/healthcheck`.  
Сервис должен быть:
- быстрым,
- удобным для контейнеризации,
- совместимым с Pydantic,
- легко тестируемым (Locust),
- хорошо интегрируемым в CI/CD.

## Рассмотренные варианты

### Вариант 1: FastAPI  **(выбран)**
**Плюсы:**
- высокая производительность (ASGI и uvicorn)
- автоматическая документация OpenAPI/Swagger
- встроенная валидация данных через Pydantic
- асинхронность
- идеален для микросервисов

**Минусы:**
- чуть выше порог входа

### Вариант 2: Flask
Плюсы: простой, легковесный  
Минусы: нет встроенной валидации, нет асинхронности, документация требует расширений

### Вариант 3: Django
Плюсы: мощный фреймворк  
Минусы: тяжеловесный и избыточный для ML-API

## Решение
Использовать **FastAPI** как основной веб-фреймворк.

## Обоснование
1. **Высокая производительность** для ML-инференса и ассинхронной работы.
2. **Автоматическая документация** удобно тестировать и демонстрировать API.
3. **Типизация и Pydantic** строгие схемы входных данных, безопасность.
4. **Идеальная совместимость с Docker** легко собирать serverless-контейнер.
5. **Простая будущая масштабируемость** - можно перейти к микросервисам без переписывания логики.

## Последствия
### Положительные
- чистая архитектура проекта (`config.py`, `schemas.py`, `services.py`, `api.py`)
- единый, воспроизводимый API-контракт
- высокая скорость разработки
- готовность к нагрузочному тестированию через Locust

### Отрицательные
- чуть больше шаблонного кода, чем во Flask
